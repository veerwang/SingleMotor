# SingleMotor - 一体化步进电机驱动程序

基于 RS-485 通讯协议（Modbus-RTU）的一体化步进电机驱动程序。

## 项目简介

本项目用于编写基于 RS-485 总线通讯协议的电机驱动程序，实现对北京立迈胜（NiMotion）一体化步进电机的控制。通讯协议采用标准 Modbus-RTU 协议，支持单主站/多从站的通信方式。

## 适用设备

- STM86 系列 RS485 总线一体化步进电机（开环）
- STM57 H 系列 RS485 总线一体化步进电机（开环）
- STM57 V 系列 RS485 总线一体化步进电机（开环）
- STM42 系列 RS485 总线一体化步进电机（开环）
- SDM57 V 系列 RS485 总线电机驱动器
- SDM42 系列 RS485 总线电机驱动器

## 通讯协议

| 项目 | 说明 |
|------|------|
| 物理层 | RS-485 总线 |
| 协议 | Modbus-RTU |
| 传输模式 | RTU（Remote Terminal Unit） |
| 通信方式 | 单主站 / 多从站 |
| 帧间隔 | >= 3.5 个字符时间（t3.5） |

### 支持的功能码

| 功能码 | 名称 | 说明 |
|--------|------|------|
| 0x03 | 读保持寄存器 | Read Holding Register |
| 0x04 | 读输入寄存器 | Read Input Register |
| 0x06 | 写单个保持寄存器 | Write a Single Holding Register |
| 0x10 | 写多个保持寄存器 | Write Multiple Holding Registers |

### 数据类型

| 寄存器类型 | 对象类型 | 访问类型 |
|----------|---------|---------|
| 输入寄存器（Input Register） | 16-bit word | 只读 |
| 保持寄存器（Holding Register） | 16-bit word | 读写 |

## 运行模式

- **位置模式** - 绝对位置运行 / 相对位置运行
- **速度模式** - 速度控制
- **原点回归模式** - 原点回归
- **脉冲输入模式** - 外部脉冲输入控制

## 项目结构

```
SingleMotor/
├── README.md
└── documents/
    └── documents/
        └── LMS-C12-18007 一体化步进电机Modbus通讯用户手册(开环)_B02.pdf
```

## 技术文档

`documents/` 目录下存放了相关的技术参考文档：

- **一体化步进电机 Modbus 通讯用户手册（开环）** - 版本 B02（2024-05-17）
  - 通信功能与 Modbus-RTU 协议说明
  - 运动控制指令（状态机、控制字、状态字、停机方式）
  - 运行模式详细说明（位置、速度、原点回归、脉冲输入）
  - 特殊功能（数字量 I/O、原点/零点设置、报警处理）
  - 电机配置与寄存器列表
  - 指令速查表
